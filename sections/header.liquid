<header class="bg-white relative shadow-header">
    <div class="max-w-7xl mx-auto px-2 py-2 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between">
        
    <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
        <!-- Logo -->
        <div class="flex-shrink-0 flex items-center">
        <a href="{{ routes.root_url }}">
            {% if section.settings.logo != blank %}

                {%- assign image_size = section.settings.logo_width | append: 'x' -%}

                <img 
                srcset="{{ section.settings.logo | img_url: image_size }} 1x, {{ section.settings.logo | img_url: image_size, scale: 2 }} 2x" 
                src="{{ section.settings.logo | img_url: image_size }}" 
                loading="lazy"  
                width="{{ section.settings.logo.width }}"
                height="{{ section.settings.logo.height }}"  
                alt="{{ section.settings.logo.alt | default: shop.name | escape }}"
                class="max-h-20 object-contain w-auto"
                />
            {% else %}
                <span class="text-2xl font-bold">{{ shop.name }}</span>
            {% endif %}
        </a>
        </div>
        <!-- End Logo -->
    </div>

    <!-- Menu -->
    {% if section.settings.menu != blank %}
    <nav class="hidden sm:block sm:ml-6 transition-all ease-in-out duration-300">
        <ul class="flex list-none text-sm items-end " role="list">
            {% for link in section.settings.menu.links %}
                <li class="p-4 relative group leading-none">
                    <!-- (link.links) Submenus -->
                    {% if link.links != blank %}
                    <a class="hover:text-primary relative p-4 uppercase group-hover:text-primary group-hover:after:content-[''] group-hover:after:border-b group-hover:after:border-primary group-hover:after:absolute group-hover:after:bottom-0 group-hover:after:block group-hover:after:border-colo group-hover:after:h-1px group-hover:after:z-10 group-hover:after:w-full" href="{{ link.url }}">{{ link.title | escape }}
                    <span class="inline-flex justify-center items-center w-14px"> <!-- render get from snippets folder -->
                    {% render 'icon-dropdown' %}</span>
                    </a>
                    <ul class=" bg-white py-3 absolute w-full invisible opacity-0 transform lg:translate-y-3 shadow-sub-menu group-hover:visible group-hover:opacity-100">
                       {% for childlink in link.links %}
                           <li>
                            <a class="hover:text-primary px-4 py-1" href="{{ childlink.url }}">{{ childlink.title | escape }}</a>
                           </li>
                       {% endfor %}
                    </ul>
                    <!-- No Submenus -->
                    {% else %}
                        <a class="uppercase" href="{{ link.url }}">{{ link.title | escape }}</a>
                    {% endif %}
                </li>
            {% endfor %}
            
            {% comment %} Nav Links {% endcomment %}
            <li class="px-2 py-4 relative flex items-end"> 
                <button id="search-toggle" type="button" class="whitespace-nowrap cursor-pointer hover:text-primary w-6">
                    {% render 'icon-search' %}
                </button>
            </li>
            {% if shop.customer_accounts_enabled %}
            <li class="px-2 py-4 relative flex items-end">
                <a class="flex hover:text-primary inline-flex justify-center items-center w-6" href="{% if customer %} {{ routes.account_url }} {% else %} {{ routes.account_login_url }} {% endif %}">
                    <span>
                        {% render 'icon-user' %}
                    </span>
                    </a>
            </li>
            {% endif %}
            <li class="px-2 py-4 relative flex items-end">
                <a href="{{ routes.cart_url }}" class="hover:text-primary">
                  {% render 'icon-cart' %}
                </a>
            </li>
        </ul>
    </nav>
    {% endif %}
    <!-- End Mnu -->
    <!-- Nav -->
    {% comment %} 
    <div class="hidden md:flex items-center justify-end space-x-5">
        <button type="submit" class="whitespace-nowrap cursor-pointer hover:text-primary w-6">
            {% render 'icon-search' %}
        </button>
        {% if shop.customer_accounts_enabled %}
            <a class="flexhover:text-primary inline-flex justify-center items-center w-6" href="{% if customer %} {{ routes.account_url }} {% else %} {{ routes.account_login_url }} {% endif %}">
            <span>
                {% render 'icon-user' %}
            </span>
            </a>
        {% endif %}
    </div> {% endcomment %}

        </div>
    </div>


    {% comment %} Search Form {% endcomment %}
    <div id="search-modal" class="absolute top-0 left-0 right-0 bottom-0 z-10 flex justify-center items-center bg-white hidden">
        <div class="after:content-[''] after:absolute after:bg-black after:opacity-50 after:top-full after:left-0 after:right-0 after:h-screen"></div>
        <div id="search-modal-content" class="flex items-center justify-center w-full h-full leading-search-bar md:px-24 pl-3 pr-12">
            <form action="{{ routes.search_url }}" method="get" class="flex-auto w-full max-w-xl">
                <div class="relative w-full flex border-solid border-2 border-gray-700 focus-within:border-primary">
                    <input autofocus type="search" name="q" placeholder="Search" class="flex-grow text-left p-6 bg-transparent h-11 focus:outline-none pr-14" >
                    <button type="submit" class="w-16 flex justify-center items-center cursor-pointer absolute right-0 top-0 p-0 overflow-hidden border-0 h-full hover:text-primary">
                        {% render 'icon-search' %}
                    </button>
                </div>
            </form>
            <button id="close-search-modal" type="button" class="flex justify-center items-center p-0 h-16 w-16 bg-transparent" aria-label="Close">
                {% render 'icon-close' %}
            </button>
        </div>
    </div>

</header>

{% schema %}
{
   "name": "Header",
  "settings": [
      {
         "type": "image_picker",
         "id": "logo",
         "label": "Insert your store logo here"
      },
      {
        "type": "range",
        "id": "logo_width",
        "min": 50,
        "max": 250,
        "step": 10,
        "default": 100,
        "unit": "x",
        "label": "Set Logo"
      },
      {
        "type": "link_list",
        "id": "menu",
        "default": "main-menu",
        "label": "Heading Navigation Menu"
      }
  ]
}
{% endschema %}